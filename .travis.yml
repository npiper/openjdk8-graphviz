sudo: required
services:
- docker
script:
- docker build --tag "$IMAGE_NAME" .
after_script:
- docker images
before_deploy:
- docker login -u "$REGISTRY_USER" -p "$REGISTRY_PASS"
- docker tag "$IMAGE_NAME" "${IMAGE_NAME}:latest"
- docker tag "$IMAGE_NAME" "${IMAGE_NAME}:${TRAVIS_BUILD_NUMBER}"
deploy:
  provider: script
  script: docker push "${IMAGE_NAME}:latest" && docker push "${IMAGE_NAME}:${TRAVIS_BUILD_NUMBER}"
  on:
    branch: master
env:
  global:
  - IMAGE_NAME=npiper/openjdk8-graphviz
  - secure: PuLktTmzbVHtrv2ZdMDLecbUVQx2poE0TkOTDyiuZmH0tq40xrJoGX2SCgnANJFPWQRjHWuA+Ij0FibBE4cGD6AxzSfz7vbM15cdNqdaENLqTJxTChwrKZ4R3kkS0atlfHb0KJRZZsMud5IPxP1nqJB77KqQhv2ZhYmM7c/PaE7OpPuKEODyoky5+dxyJKWmZRqB/99uT4qBdwAKwIKHIDRoMnFC5Yg1KRnTjKnrze2QAeVmpFcl2V6ZF3U+beBKAiraKkuyVekpRx6l7oSAuv51lBJnK1cWfB9fHINRgjQULYqXjlYUXgHmKGSFNGO1nxEGjUQvLGQdwHWxE4QPvgGgLUKXBypCTMv+ctedXFrBkJFIM8z2k9iyc7qkM7g1qBdh/l4hksoDFBfn1T3u27cCQ1RiG0PSQJpZPCpfEFQ7Y5uOa6QPZME0Ww3cOBSXTyXSOpQ9hJISAndbLpbmANBX0UiJzPVyacaNwbokOZwkHyhfmD2V7eobM1puMq5j544bTqeqUSP7s45Z++sFnNDpAg0nFkd6vP7nn8ozftHW4oPyoCTMMQj7b4Dn83oKTDMb79RDmMgLGVfo7J5ZSG8ZHZVJgEzChhmXjgJmN8eQGET8/Q2ukMShEuYsXvAuNa9D3pnB73A7f6mbaL/XoEUU6k+PK+EQkK48yIuJ92Y=
  - secure: kwg5IP9SIrsGlAEdNkTMJqnnzAbGLYmmON25z9DO6T3WD5XyiDdRRX0kj0O+P61JObf+bxrQCZ7YNGMEb5PIUfbVpEsOjUg/EnEhB2xMWBXXzsUS8w44tMJPKYXuM/M9aS7SbycKcDgK5eRa7r6G88q2HMW75flmRXf9hmxGElg8xX+u0RQQCsU5eiWJbZFM9YHlmM3mr7erKfyrHZB8IldUTSlLpzi7WGWokPt7jMDrNZAduJulkELBoIEYGVVJUcRT90JA/0yklcjBmNrKnNzF5nAnNJnUhrQlQVWfAnOp4uk1LGWxQA/qlA0/JcDvazt/pW+6YHYStMUFN9tRzlghE5oALrTyY4iVYkHtLyqjoG5lWH3+vWxoEL11JToWvmr1Ut2p316Cclho9sCzOmU/go0EFw1rQmwqHhx1klRhRRdYWhXw0PLGjWE17DATNbxiwX6MfKTrvf5jRJhtYDuHApKpkx00p+rlzV4jEXrMaTdzsmaVyNdMHNz3f/E20KHrJaV55rMYP+9KngTCzecXP7CRQiOGQ8X3CPVsepstEsARGH3PoFBS7fudyqNQunm/5VTgwfUlfaL8L2Leb9+tlCUj0xfdQwcOiNL3KFzrcCNuZQOaHN9HWDP8zKuTEzUe99fnRnI1DmI7pJWD2WjDiq1YH6qZLutw8Z9ls4Y=
  - secure: hTAkh9AwF64bO9Hb8gMRM7srUltMzeRmfwDT44ef3cW639ENoy9eICHerDXijP+9+sqjpEiJ861SFIlbNtDkJuoCUdxuiMGQLLBwOkZBjPXeGzWo1L/ECrU3NK+iq6vAOAcX/DcDyRCUU+tc+XIr2fwqc7Gp2FRw6UqfaLXIcCyfFLbMO+/FAfrgH3OJRcJT9nO/s1qWNGjzS1+Fi2yxAsrzdjzJuO4j4J1jVzkZhi33zSNY6R+7sT597qH3fo36Fzu31ZI8V35upqr2ZQVRnG/XbybRkBnoHQ5rlPri6wnMOiigXgFGj4/SssXTkJg4FciDsuQhLwQQd1ufi8FP2bB+Q/CMzbhiNLuN27GLO1ZcmG5+IF+FuKeIjyy8gdlMOPeJhE6f0N2oAJ9Sxe2i9257JVqD1p8gKyfS0eg78z+nR7m1gEAuWRVLwjN31gNvrRSIIuvLIcHN0hx0X05A2ck1k/l3Hkfu/jjTTtlM89VK6pKTqps+bY8QM4wSwSfR90r9TxWX+re/f9WCy5ApenJMK7P+3mYl05c+WPUhr7NTdGGsma27EJvfB6QSZSTlUgg8UB/6ZTqqgCkIJR0t5aqgng6x4bxPcI4Ym+Sw4ItWpLSagVcVkaO8cSnq9zjWAHm2JtCnLa5HbLeMQgxkXYblgb6pPnZ4Ho4tigih5ME=
  - secure: B24CYpFHbE14oe2cl6Fuh6XxBbRiap8qAnIFKO2HfiCAEY6UyLaFMCUMcxKmE7XllElmldGqSxtCS2smIB/ftm0crj7/D3nRaDDlP8tZM3UhYwTG/aVNE2e/B34JhinlvFomquK4ijdPiEWYnJoK0HFPF7iMr0WVkqTRHN5iU5+70vtWGrsJfCCzNuYJij2VzQjIofmUG0R2QsTjWmMGBK+NSt7ZCmDp8qFeoXe4NhglWoBpe6hCMbcli1/dhOqP5zxdeJQgsVP6p1ZBUpU849x09YYwA4TrLdcwBAcCtu+RF+axFoZ8OE+aROthAY67CaaaG+tDgn6RRka6CqoZK6XRlrIDzUXlZzrV/byvp33ydxsunuRDkyYFjzOWfTuJr+rhPC9fUcvycTXSHd+bVj09liCgahi4fArjpc4fmCryHqD3SQs30/ZrNQac0r+PX5kTa9PkXq7VBoEs16MCP3pvsVf7IDUNZALv83LLGKoHXkM9nEF9m6AikIg6gBtTQLQWF0Q6++hhQVjg6l2n8RQ3Jlqm5SHOUfMeOtbrDYEluOya2oYM/9HK7s8sDMmu9KFSfPRO8oEwl7JeZQKylWHmbxqJX3GRZXvFMekRGxN8N/jZhYvg1Ym1JN8hvU9uRR0JtDD/g3X8n7HJkbWx6up9IrFvhywYhw5sLISQ+wY=
